# 엽떡의 여행



## 목차

 - 개요
 - 캐릭터
 - 적
 - 아이템
 - 총알(포크)
 - 일시정지
 - 사운드
 - 중요 클래스

> 중간 과정은 팀원 중 한 명이 git이 안 되어 구글 드라이브로 대체하여 진행

## 개요
마우스로 캐릭터를 이동하면서 위에서 아래로 내려오는 적을 포크를 쏴서 맞추는 게임이다. 플레이어의 체력이 0이 되면 게임이 끝나게 되고, 자신의 점수를 등록할 수 있게 된다.  등록된 점수는 순위 목록을 통해 볼 수 있다. 적은 죽으면서 아이템을 드랍하고 플레이어는 이를 먹을 수 있다. 추가로 효과음과 배경음이 있으며, 소리를 끌 수 있다.

## 캐릭터
캐릭터는 사용자의 마우스 위치에 따라 움직인다. 내부적으로 플레이어가 피격되면 Thread가 시작되어 플레이어의 이미지를 일정시간마다 바꿔 깜박이는 피격 효과를 구현하였다. 체력에 따라 플레이어 이미지가 다르게 표시되고 0이 되면 게임이 종료된다.

## 적
적은 줄 단위로 생성되어 플레이어 방향으로 이동하게 된다. 적은 내부적으로 어떤 아이템을 드랍하는지 리스트가 있고 드랍 확률이 존재한다. 적도 플레이어와 마찬가지로 체력에 따라 이미지가 다르게 표시된다. 적은 0이 되면 확률에 따라 아이템을 드랍한다.

## 아이템
아이템은 적이 죽었을 때 드랍을 통해서 얻을 수 있다. 아이템과 플레이어가 충돌 시 아이템 획득이 인정되며, 아이템은 종료에 따라 점수를 올려주거나 플레이어의 체력을 회복시켜준다. 아이템은 중력에 따라 떨어지듯이 이동한다.

## 총알(포크)
플레이어는 총알(포크)을 통해 적의 체력을 줄일 수 있다. 총알은 일정 시간마다 생성되며 플레이어가 있는 위치에서 생성되어 직선으로 나아가게 된다. 총알은 2종류가 있으며, 첫 번째는 기본 총알이고, 두 번째는 아이템을 통해 일정 시간 동안 사용할 수 있다. 총알과 적이 충돌 시 적의 체력이 1 감소한다.

## 일시정지
플레이중 ESC를 누르면 일시정지가 가능하다. 일시정지 시에는 모든 Thread가 정지하고 일시정지가 풀리면 다시 실행된다. 

## 사운드
사운드는 팀원 황승민이 모두 제작하였다. 피격 시 효과음과 배경 음악 등이 있으며 on/off가 가능하다. 내부적으로는 사운드를 담당하는 클래스를 만들어 사운드 객체를 생성하여 재생하는 형식으로 실행된다.

## 중요 클래스
게임 내에서 중요한 몇 가지 클래스를 소개한다.

### 서비스 클래스

Bullets, Items 가 이 클래스에 해당한다.

각 객체에 접근하여 직접 작업을 하는 클래스이다. 외부에서 이 클래스의 메소드를 통해서 적과 아이템을 관리하게 된다. 총알, 적 등의 인터페이스를 통해 각 객체에 접근하기 때문에 새로운 요소의 추가에 영향을 받지 않는다. 모든 서비스 클래스는 Thread-safe 하게 구현되어 있기 때문에, multi-thread 환경에서 사용 가능하다. 


### 오퍼레이터 클래스
common 패키지의 Operater 클래스이다. 게임 실행 화면 전체를 담당한다. 

게임 전체의 Thread를 관리하며  사용자 입력에 따라 Thread를 조정한다. 총 4개의 Thread를 관리하게 되는데 각 Thread는 아래와 같다.

 - makeEnemy
 - updateAll
 - playerAttack
 - checker

makeEnemy는 적을 생성하는 라인을 만들어 적 List에 넣는 Thread이다.
upadateAll은 모든 구성요소의 위치와 피격 판정을 하는 Thread이다.
playerAttack은 플레이어의 공격을 위한 Thread이다.
checker는 위의 세 Thread들의 제어를 위한 Thread이다.

 각 Thread는 flag를 통해 작업을 하게 되는데, checker는 사용자 입력을 통해 게임의 상황을 파악하고 각 flag를 조정하여 Thread를 조정하게 된다. 그리고 Thread를 다시 시작시키도 한다. 이를 통해 게임에서 일시정지를 구현하였다. 

## 이미지 사용

떡볶이 연구소 TOPOKKI 캐릭터


